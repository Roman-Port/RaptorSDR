var RaptorPlugin;(()=>{var t={426:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(645),s=r.n(n)()((function(t){return t[1]}));s.push([t.id,".rplug_recorder_status {\r\n    display: flex;\r\n    margin-bottom: 8px;\r\n}\r\n\r\n.rplug_recorder_status_led {\r\n    width: 12px;\r\n    height: 12px;\r\n    background: #f75757;\r\n    margin: auto 0;\r\n    margin-right: 10px;\r\n    border-radius: 50%;\r\n    margin-left: 3px;\r\n}\r\n\r\n.rplug_recorder_status_text {\r\n    color: white;\r\n}\r\n\r\n.rplug_recorder_control {\r\n    display: flex;\r\n    background: #2c2f33;\r\n    border-radius: 5px;\r\n    border: 1px solid #444446;\r\n    position: relative;\r\n    overflow: hidden;\r\n    height: 30px;\r\n}\r\n\r\n.rplug_recorder_control_carousel {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    transition: all 120ms cubic-bezier(0.3, 0.88, 0.79, 1.29);\r\n}\r\n\r\n.rplug_recorder_control_bar {\r\n    display: flex;\r\n    position: relative;\r\n    overflow: hidden;\r\n    height:30px;\r\n}\r\n\r\n.rplug_recorder_control_bar * {\r\n    flex-grow: 1;\r\n    width: 25%;\r\n    text-align: center;\r\n    padding: 6px 0;\r\n    color: #d8d7d7;\r\n    font-size: 15px;\r\n    cursor: pointer;\r\n    z-index: 1;\r\n    border-radius: 5px;\r\n}\r\n\r\n.rplug_recorder_control_bar_record *:first-of-type {\r\n    border-top-left-radius:unset;\r\n    border-bottom-left-radius:unset;\r\n}\r\n\r\n.rplug_recorder_control_bar *:hover {\r\n    background:#444446;\r\n}\r\n\r\n.rplug_recorder_control_bar_record *:hover::after {\r\n    content: '';\r\n    background: #444446;\r\n    top: 0;\r\n    bottom: 0;\r\n    width: 1000px;\r\n    position: absolute;\r\n    pointer-events: none;\r\n    z-index: 0;\r\n}\r\n\r\n.rplug_recorder_control_bar_record *:last-of-type {\r\n    width: 40%;\r\n    text-transform: uppercase;\r\n}\r\n\r\n.rplug_recorder_control_loader {\r\n    opacity:0.4;\r\n    pointer-events: none;\r\n}",""]);const i=s},645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r=t(e);return e[2]?"@media ".concat(e[2]," {").concat(r,"}"):r})).join("")},e.i=function(t,r,n){"string"==typeof t&&(t=[[null,t,""]]);var s={};if(n)for(var i=0;i<this.length;i++){var o=this[i][0];null!=o&&(s[o]=!0)}for(var a=0;a<t.length;a++){var l=[].concat(t[a]);n&&s[l[0]]||(r&&(l[2]?l[2]="".concat(r," and ").concat(l[2]):l[2]=r),e.push(l))}},e}},654:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>g});var n=r(379),s=r.n(n),i=r(795),o=r.n(i),a=r(695),l=r.n(a),d=r(216),u=r.n(d),c=r(426),p={styleTagTransform:function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}},setAttributes:function(t){var e=r.nc;e&&t.setAttribute("nonce",e)},insert:function(t){var e=l()("head");if(!e)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");e.appendChild(t)}};p.domAPI=o(),p.insertStyleElement=u(),s()(c.Z,p);const g=c.Z&&c.Z.locals?c.Z.locals:void 0},695:t=>{"use strict";var e={};t.exports=function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}},379:t=>{"use strict";var e=[];function r(t){for(var r=-1,n=0;n<e.length;n++)if(e[n].identifier===t){r=n;break}return r}function n(t,n){for(var i={},o=[],a=0;a<t.length;a++){var l=t[a],d=n.base?l[0]+n.base:l[0],u=i[d]||0,c="".concat(d," ").concat(u);i[d]=u+1;var p=r(c),g={css:l[1],media:l[2],sourceMap:l[3]};-1!==p?(e[p].references++,e[p].updater(g)):e.push({identifier:c,updater:s(g,n),references:1}),o.push(c)}return o}function s(t,e){var r=e.domAPI(e);return r.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r.update(t=e)}else r.remove()}}t.exports=function(t,s){var i=n(t=t||[],s=s||{});return function(t){t=t||[];for(var o=0;o<i.length;o++){var a=r(i[o]);e[a].references--}for(var l=n(t,s),d=0;d<i.length;d++){var u=r(i[d]);0===e[u].references&&(e[u].updater(),e.splice(u,1))}i=l}}},216:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e),e}},795:t=>{"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(r){!function(t,e,r){var n=r.css,s=r.media,i=r.sourceMap;s?t.setAttribute("media",s):t.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(n,t)}(e,t,r)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},360:(t,e,r)=>{"use strict";r.d(e,{Z:()=>v});class n{static CreateDom(t,e,r){var n=document.createElement(t);return n.SetStyleAttribute=function(t,e){return this.style[t]=e,this},n.Chain=function(t){return t(this),this},n.SetText=function(t){return this.innerText=t,this},n.AddClass=function(t){return this.classList.add(t),this},null!=e&&n.classList.add(e),null!=r&&r.appendChild(n),n}static AddDragEvents(t,e){this.draggingBound||(window.addEventListener("mousemove",(t=>{null!=this.currentDraggingItem&&(this.currentDraggingStarted||null==this.currentDraggingItem.xraptor_dragging_event.DragBegin||this.currentDraggingItem.xraptor_dragging_event.DragBegin(t,this.currentDraggingItem),null!=this.currentDraggingItem.xraptor_dragging_event.DragMove&&this.currentDraggingItem.xraptor_dragging_event.DragMove(t,this.currentDraggingItem),this.currentDraggingStarted=!0,t.preventDefault(),t.stopPropagation())})),window.addEventListener("mouseup",(t=>{this.currentDraggingStarted&&null!=this.currentDraggingItem&&(null!=this.currentDraggingItem.xraptor_dragging_event.DragEnd&&this.currentDraggingItem.xraptor_dragging_event.DragEnd(t,this.currentDraggingItem),this.currentDraggingItem=null,this.currentDraggingStarted=!1,t.preventDefault(),t.stopPropagation())})),this.draggingBound=!0),t.xraptor_dragging_event=e,t.addEventListener("mousedown",(t=>{null==this.currentDraggingItem&&(this.currentDraggingItem=t.currentTarget,this.currentDraggingStarted=!1,t.preventDefault(),t.stopPropagation())}))}static ForceBeginDrag(t){this.currentDraggingItem=t,this.currentDraggingStarted=!1}}n.currentDraggingStarted=!1,n.draggingBound=!1;class s{constructor(t,e){this.name=t,this.option=e}Build(){var t=n.CreateDom("div","rsys_settings_goption_setting");null==this.option.SetAllowed||this.option.SetAllowed()||t.classList.add("rsys_settings_goption_setting_readonly"),n.CreateDom("div","rsys_settings_goption_title",t).innerText=this.name;var e=this.BuildInput(t);return t._xraptor_option_evt_handle=t=>{this.ValueChanged(e,t)},this.option.OnChanged.Bind(t._xraptor_option_evt_handle),this.ValueChanged(e,this.option.GetValue()),t}Destroy(t){this.option.OnChanged.Unbind(t._xraptor_option_evt_handle),t.remove()}SetValue(t){this.option.SetValue(t)}}class i extends s{constructor(t,e,r,n){super(t,e),this.trueText=r,this.falseText=n}BuildInput(t){var e=n.CreateDom("div","rsys_settings_goption_boolean",t).AddClass("rsys_settings_goption_base");return e._xraptor_boolean_option_true=this.HelperCreateBox(e,!0,this.trueText),e._xraptor_boolean_option_false=this.HelperCreateBox(e,!1,this.falseText),e}ValueChanged(t,e){var r=t;e?(r._xraptor_boolean_option_true.classList.add("rsys_settings_goption_boolean_checked"),r._xraptor_boolean_option_false.classList.remove("rsys_settings_goption_boolean_checked")):(r._xraptor_boolean_option_true.classList.remove("rsys_settings_goption_boolean_checked"),r._xraptor_boolean_option_false.classList.add("rsys_settings_goption_boolean_checked"))}HelperCreateBox(t,e,r){var s=n.CreateDom("div",null,t);return s.innerText=r,s.addEventListener("click",(()=>{this.SetValue(e)})),s}}class o extends s{constructor(t,e,r,n,s){super(t,e),this.saveFile=s,this.dialogTitle=n,this.conn=r}BuildInput(t){var e=n.CreateDom("div","rsys_settings_goption_file",t).AddClass("rsys_settings_goption_base");return e.innerText="Browse...",e.addEventListener("click",(()=>{(this.saveFile?this.conn.CreateFileSaveDialog(this.dialogTitle):this.conn.CreateFileOpenDialog(this.dialogTitle)).then((t=>{this.SetValue(t)}))})),e}ValueChanged(t,e){}}class a extends s{constructor(t,e,r,n){super(t,e),this.min=r,this.max=n}BuildInput(t){var e=n.CreateDom("input","rsys_settings_goption_input",t).AddClass("rsys_settings_goption_base");return e.type="number",e.max=this.max.toString(),e.min=this.min.toString(),e.addEventListener("change",(()=>{this.SetValue(parseFloat(e.value))})),e}ValueChanged(t,e){t.value=null==e?null:e.toString()}}class l extends s{constructor(t,e,r){super(t,e),this.values=r}BuildInput(t){for(var e=n.CreateDom("select","rsys_settings_goption_input",t).AddClass("rsys_settings_goption_base"),r=Object.keys(this.values),s=0;s<r.length;s++){var i=n.CreateDom("option",null,e);i.innerText=r[s],i.value=this.values[r[s]]}return e.addEventListener("change",(()=>{this.SetValue(e.value)})),e}ValueChanged(t,e){t.value=e}}class d extends s{constructor(t,e,r,n){super(t,e),this.min=r,this.max=n}BuildInput(t){var e=n.CreateDom("input","rsys_settings_goption_input",t).AddClass("rsys_settings_goption_base").AddClass("rsys_settings_goption_range");return e.type="range",e.max=this.max.toString(),e.min=this.min.toString(),e.addEventListener("input",(()=>{this.SetValue(parseFloat(e.value))})),{helper:n.CreateDom("div","rsys_settings_goption_range_helper",t),input:e}}ValueChanged(t,e){t.input.value=null==e?null:e.toString(),t.helper.innerText=null==e?null:e.toString()}}class u{constructor(t,e,r){this.options=[],this.name=t,this.id=e,this.conn=r}AddOptionNumber(t,e,r,n){return this.options.push(new a(t,e,r,n)),this}AddOptionRange(t,e,r,n){return this.options.push(new d(t,e,r,n)),this}AddOptionSelect(t,e,r){return this.options.push(new l(t,e,r)),this}AddOptionBoolean(t,e,r,n){return this.options.push(new i(t,e,r,n)),this}AddOptionFileOpen(t,e,r){return this.options.push(new o(t,e,this.conn,r,!1)),this}AddOptionFileSave(t,e,r){return this.options.push(new o(t,e,this.conn,r,!0)),this}AddOptionCustom(t){return this.options.push(t),this}Build(){return{name:this.name,id:this.id,components:this.options}}}var c;!function(t){t.GENRAL="GENERAL",t.EXTRA="EXTRA",t.PLUGIN="PLUGIN",t.PINNED="PINNED",t.MENU="MENU",t.NONE="NONE"}(c||(c={}));class p{constructor(){this.subscriptions=[]}Bind(t){this.subscriptions.push(t)}Unbind(t){for(var e=0;e<this.subscriptions.length;e++)if(this.subscriptions[e]==t)return this.subscriptions.splice(e,1),!0;return!1}Fire(t){for(var e=0;e<this.subscriptions.length;e++){var r=this.subscriptions[e](t);null!=r&&!0===r&&(this.subscriptions.splice(e),e--)}}}class g{constructor(t){this.parent=t,this.subscriptions=[]}CreateSubscription(t){var e=new h(this.parent,t);return this.subscriptions.push(e),e}}class h extends class{constructor(){this.OnMessage=new p}SendMessageGetResponse(t){return e=this,r=void 0,s=function*(){var e=class{constructor(){}static GenerateRandomString(t){const e="QWERTYUIOPLKJHGFDSAZXCVBNM1234567890";for(var r="",n=0;n<t;n++)r+=e[Math.floor(Math.random()*e.length)];return r}}.GenerateRandomString(8);t.token=e;var r=new Promise((t=>{this.OnMessage.Bind((r=>{r.token==e&&t(r)}))}));return this.SendMessage(t),r},new((n=void 0)||(n=Promise))((function(t,i){function o(t){try{l(s.next(t))}catch(t){i(t)}}function a(t){try{l(s.throw(t))}catch(t){i(t)}}function l(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n((function(t){t(r)}))).then(o,a)}l((s=s.apply(e,r||[])).next())}));var e,r,n,s}}{constructor(t,e){super(),this.parent=t,this.opcode=e,t.OnMessage.Bind((t=>{t.op==this.opcode&&this.OnMessage.Fire(t.d)}))}SendMessage(t){this.parent.SendMessage({op:this.opcode,d:t})}}r(654);class _{constructor(t,e,r,n){this.controls=[],this.plugin=t,this.conn=e,this.settings=r,this.rpcDispatcher=new g(n),this.rpcEpStart=this.rpcDispatcher.CreateSubscription("RECORDING_START"),this.rpcEpStop=this.rpcDispatcher.CreateSubscription("RECORDING_STOP"),this.rpcEpCancel=this.rpcDispatcher.CreateSubscription("RECORDING_CANCEL"),this.status=this.conn.GetPrimitiveDataProvider("RaptorSDR.RomanPort.Recorder."+this.settings.id+".Status"),this.duration=this.conn.GetPrimitiveDataProvider("RaptorSDR.RomanPort.Recorder."+this.settings.id+".Duration"),this.size=this.conn.GetPrimitiveDataProvider("RaptorSDR.RomanPort.Recorder."+this.settings.id+".Size"),this.status.OnChanged.Bind((()=>this.UpdateAllControls())),this.duration.OnChanged.Bind((()=>this.UpdateAllControls())),this.size.OnChanged.Bind((()=>this.UpdateAllControls()));var s=new u(r.name,r.id,e).AddOptionCustom(this).Build();e.RegisterSettingsRegionSidebar(s,c.EXTRA)}Build(){var t=n.CreateDom("div"),e=n.CreateDom("div","rplug_recorder_status",t),r=n.CreateDom("div","rplug_recorder_status_led",e),s=n.CreateDom("div","rplug_recorder_status_text",e),i=n.CreateDom("div","rplug_recorder_control",t),o=n.CreateDom("div","rplug_recorder_control_carousel",i);o.addEventListener("mousedown",(t=>t.preventDefault()));for(var a=n.CreateDom("div","rplug_recorder_control_bar",o).AddClass("rplug_recorder_control_bar_record"),l=0;l<3;l++)this.CreateRecorderBtn(a,this.settings.rewind_buffer_seconds/Math.pow(2,l));this.CreateRecorderBtn(a,0,"RECORD");var d=n.CreateDom("div","rplug_recorder_control_bar",o);n.CreateDom("div",null,d).SetText("Cancel").addEventListener("click",(()=>this.CancelRecording())),n.CreateDom("div",null,d).SetText("Stop").addEventListener("click",(()=>this.StopRecording()));var u={statusText:s,statusLed:r,carousel:o};return t.xraptor_recorder_control=u,this.UpdateControl(u),this.controls.push(u),t}Destroy(t){this.controls.splice(this.controls.indexOf(t.xraptor_recorder_control)),t.remove()}CreateRecorderBtn(t,e,r){var s=n.CreateDom("div",null,t);return s.xraptor_recorder_time=e,s.innerText=null==r?e+"s+":r,s.addEventListener("click",(t=>{this.StartRecording(t.currentTarget.xraptor_recorder_time),t.preventDefault(),t.stopPropagation()})),s}UpdateAllControlsLoading(){for(var t=0;t<this.controls.length;t++)this.controls[t].carousel.classList.add("rplug_recorder_control_loader")}UpdateAllControls(){for(var t=0;t<this.controls.length;t++)this.UpdateControl(this.controls[t])}UpdateControl(t){var e,r,n;switch(this.status.GetValue()){case"IDLE":e="#444446",r=0,n=!1;break;case"RECORDING":e="#f75757",r=1,n=!1;break;case"STOPPING":e="#f79257",r=1,n=!0;break;default:console.warn("RecorderSession: Unknown status.")}var s=this.duration.GetValue(),i=Math.floor(s/60/60).toString().padStart(2,"0")+":"+Math.floor(s/60%60).toString().padStart(2,"0")+":"+Math.floor(s%60).toString().padStart(2,"0"),o=Math.floor(this.size.GetValue()/1e3)+" MB";t.statusText.innerText=i+" - "+o,t.statusLed.style.background=e,t.carousel.style.top=-30*r+"px",n?t.carousel.classList.add("rplug_recorder_control_loader"):t.carousel.classList.remove("rplug_recorder_control_loader")}StartRecording(t){this.UpdateAllControlsLoading(),this.rpcEpStart.SendMessage({seconds:t})}StopRecording(){this.UpdateAllControlsLoading(),this.conn.CreateFileSaveDialog("Save File").then((t=>{null!=t&&this.rpcEpStop.SendMessage({output:t})}))}CancelRecording(){this.UpdateAllControlsLoading(),this.rpcEpCancel.SendMessage({})}}class v{constructor(t){this.ctx=t}Init(){for(var t=this.ctx.conn.GetPrimitiveDataProvider("RaptorSDR.RomanPort.Recorder.RecorderList").GetValue(),e=0;e<t.length;e++)new _(this,this.ctx.conn,t[e],this.ctx.CreatePluginRpcEndpoint(t[e].id))}}},138:(t,e,r)=>{const n=r(360).Z;t.exports=n}},e={};function r(n){var s=e[n];if(void 0!==s)return s.exports;var i=e[n]={id:n,exports:{}};return t[n](i,i.exports,r),i.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n=r(138);RaptorPlugin=n})();