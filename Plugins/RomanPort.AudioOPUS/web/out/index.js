var RaptorPlugin;(()=>{var t={122:(t,e,o)=>{"use strict";o.d(e,{Z:()=>n});var i=function(t,e,o,i){return new(o||(o=Promise))((function(s,n){function a(t){try{u(i.next(t))}catch(t){n(t)}}function r(t){try{u(i.throw(t))}catch(t){n(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(a,r)}u((i=i.apply(t,e||[])).next())}))};class s{constructor(t){this.context=t}GetName(){return"OPUS Low Latency Audio"}Start(){return i(this,void 0,void 0,(function*(){this.initTask=this.InitAudio(),yield this.initTask}))}InitAudio(){return i(this,void 0,void 0,(function*(){this.audioContext=new AudioContext({sampleRate:48e3,latencyHint:"interactive"}),yield this.audioContext.audioWorklet.addModule(this.GetAudioWorkerAsDataURL()),this.opusNode=new AudioWorkletNode(this.audioContext,"OpusProcessor",{outputChannelCount:[2]}),this.opusNode.connect(this.audioContext.destination),this.SetVolume(0),this.opusNode.port.postMessage({op:"INIT",payload:{sampleRate:this.audioContext.sampleRate,wasm:this.context.GetPackage("web").GetFile("libopus.wasm")}}),this.sock=this.context.conn.GetStream(this.context.GetId()+".Stream").AddQueryArgument("sample_rate",this.audioContext.sampleRate.toString()).AsWebSocket(),this.sock.onmessage=t=>{this.opusNode.port.postMessage({op:"FRAME",payload:new Uint8Array(t.data)})}}))}SetVolume(t){return i(this,void 0,void 0,(function*(){yield this.initTask,null!=this.opusNode&&this.opusNode.port.postMessage({op:"VOLUME",payload:t})}))}Stop(){return i(this,void 0,void 0,(function*(){yield this.initTask,this.sock.close()}))}GetAudioWorkerAsDataURL(){var t=this.context.GetPackage("web").GetFileAsString("OpusAudioWorker.js");return"data:text/javascript;base64,"+btoa(t)}}class n{constructor(t){this.ctx=t}Init(){this.ctx.RegisterComponentAudio(new s(this.ctx))}}},138:(t,e,o)=>{const i=o(122).Z;t.exports=i}},e={};function o(i){var s=e[i];if(void 0!==s)return s.exports;var n=e[i]={exports:{}};return t[i](n,n.exports,o),n.exports}o.d=(t,e)=>{for(var i in e)o.o(e,i)&&!o.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var i=o(138);RaptorPlugin=i})();