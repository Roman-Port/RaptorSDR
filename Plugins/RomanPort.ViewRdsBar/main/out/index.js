var RaptorPlugin;(()=>{var t={426:(t,n,e)=>{"use strict";e.d(n,{Z:()=>s});var i=e(645),r=e.n(i)()((function(t){return t[1]}));r.push([t.id,".rplug_rds {\r\n    display: flex;\r\n    background: #23272a;\r\n    flex-direction: row;\r\n    height: 40px;\r\n}\r\n\r\n.rplug_rds_bottom {\r\n    background: #1c1f21;\r\n}\r\n\r\n.rplug_rds_text {\r\n    color: white;\r\n    font-size: 15px;\r\n    white-space: pre;\r\n    font-family: 'Roboto Mono', monospace;\r\n    text-overflow: clip;\r\n    overflow: hidden;\r\n    flex-shrink: 0;\r\n}\r\n\r\n.rplug_rds_element {\r\n    display: flex;\r\n    flex-shrink: 0;\r\n    align-items: center;\r\n}\r\n\r\n.rplug_rds_indicator .rplug_rds_text {\r\n    background: white;\r\n    color: black;\r\n    padding: 5px 8px;\r\n    border-radius: 5px;\r\n    font-weight: 600;\r\n    font-size: 15px;\r\n}\r\n\r\n.rplug_rds_text br {\r\n    display: none; /* ugly hack */\r\n}\r\n\r\n.rplug_rds_indicator {\r\n    margin-right: 5px;\r\n}\r\n\r\n.rplug_rds_indicator_unlit .rplug_rds_text {\r\n    opacity: 0.25;\r\n}\r\n\r\n.rplug_rds_ps {\r\n    background: #1c1f21;\r\n    padding: 0px 15px;\r\n    margin-right: 15px;\r\n}\r\n\r\n.rplug_rds_rt {\r\n    position: relative;\r\n    flex-grow: 1;\r\n}\r\n\r\n.rplug_rds_rt .rplug_rds_text {\r\n    position: absolute !important;\r\n    right: 0;\r\n    left: 0;\r\n    overflow: hidden !important;\r\n    text-overflow: ellipsis !important;\r\n}\r\n\r\n.rplug_rds_pi {\r\n    position: relative;\r\n    margin-left: 10px;\r\n    margin-right: 10px;\r\n    cursor: pointer;\r\n}\r\n\r\n.rplug_rds_stationinfo {\r\n    position: fixed;\r\n    margin-top: 35px;\r\n    opacity: 0;\r\n    pointer-events: none;\r\n    transition: opacity 90ms ease-in-out, margin 90ms ease-in-out;\r\n    display: none;\r\n    z-index: 999;\r\n}\r\n\r\n.rplug_rds_pi:hover .rplug_rds_stationinfo {\r\n    opacity: 1;\r\n    margin-top: 50px;\r\n}\r\n\r\n.rplug_rds_stationinfo_content {\r\n    padding: 10px;\r\n    background: #23272a;\r\n    border-radius: 5px;\r\n    border: 1px solid #2C2F33;\r\n    position: absolute;\r\n    display: flex;\r\n}\r\n\r\n.rplug_rds_stationinfo_div {\r\n    margin: 0 5px;\r\n    color: #585858;\r\n    font-size: 15px;\r\n    font-family: 'Roboto Mono', monospace;\r\n    font-weight: 800;\r\n}\r\n\r\n.rplug_rds_stationinfo_distance {\r\n    margin-right: 5px;\r\n}\r\n\r\n.rplug_rds_stationinfo_direction {\r\n    width: 0;\r\n    height: 0;\r\n    border-left: 5px solid transparent;\r\n    border-right: 5px solid transparent;\r\n    border-bottom: 14px solid white;\r\n    margin: 3px 5px;\r\n}\r\n\r\n.rplug_rds_stationinfo_gps {\r\n    display: none;\r\n}\r\n\r\n.rplug_rds_stationinfo_activegps .rplug_rds_stationinfo_gps {\r\n    display: block;\r\n}\r\n\r\n.rplug_rds_stationinfo_info .rplug_rds_stationinfo {\r\n    display: block;\r\n}\r\n\r\n.rplug_rds_stationinfo_info .rplug_rds_pi {\r\n    display: flex;\r\n}",""]);const s=r},645:t=>{"use strict";t.exports=function(t){var n=[];return n.toString=function(){return this.map((function(n){var e=t(n);return n[2]?"@media ".concat(n[2]," {").concat(e,"}"):e})).join("")},n.i=function(t,e,i){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(i)for(var s=0;s<this.length;s++){var a=this[s][0];null!=a&&(r[a]=!0)}for(var o=0;o<t.length;o++){var l=[].concat(t[o]);i&&r[l[0]]||(e&&(l[2]?l[2]="".concat(e," and ").concat(l[2]):l[2]=e),n.push(l))}},n}},654:(t,n,e)=>{"use strict";e.r(n),e.d(n,{default:()=>a});var i=e(379),r=e.n(i),s=e(426);r()(s.Z,{insert:"head",singleton:!1});const a=s.Z.locals||{}},379:(t,n,e)=>{"use strict";var i,r=function(){var t={};return function(n){if(void 0===t[n]){var e=document.querySelector(n);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}t[n]=e}return t[n]}}(),s=[];function a(t){for(var n=-1,e=0;e<s.length;e++)if(s[e].identifier===t){n=e;break}return n}function o(t,n){for(var e={},i=[],r=0;r<t.length;r++){var o=t[r],l=n.base?o[0]+n.base:o[0],d=e[l]||0,c="".concat(l," ").concat(d);e[l]=d+1;var h=a(c),p={css:o[1],media:o[2],sourceMap:o[3]};-1!==h?(s[h].references++,s[h].updater(p)):s.push({identifier:c,updater:g(p,n),references:1}),i.push(c)}return i}function l(t){var n=document.createElement("style"),i=t.attributes||{};if(void 0===i.nonce){var s=e.nc;s&&(i.nonce=s)}if(Object.keys(i).forEach((function(t){n.setAttribute(t,i[t])})),"function"==typeof t.insert)t.insert(n);else{var a=r(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(n)}return n}var d,c=(d=[],function(t,n){return d[t]=n,d.filter(Boolean).join("\n")});function h(t,n,e,i){var r=e?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(t.styleSheet)t.styleSheet.cssText=c(n,r);else{var s=document.createTextNode(r),a=t.childNodes;a[n]&&t.removeChild(a[n]),a.length?t.insertBefore(s,a[n]):t.appendChild(s)}}function p(t,n,e){var i=e.css,r=e.media,s=e.sourceMap;if(r?t.setAttribute("media",r):t.removeAttribute("media"),s&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}var u=null,f=0;function g(t,n){var e,i,r;if(n.singleton){var s=f++;e=u||(u=l(n)),i=h.bind(null,e,s,!1),r=h.bind(null,e,s,!0)}else e=l(n),i=p.bind(null,e,n),r=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)};return i(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;i(t=n)}else r()}}t.exports=function(t,n){(n=n||{}).singleton||"boolean"==typeof n.singleton||(n.singleton=(void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i));var e=o(t=t||[],n);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var i=0;i<e.length;i++){var r=a(e[i]);s[r].references--}for(var l=o(t,n),d=0;d<e.length;d++){var c=a(e[d]);0===s[c].references&&(s[c].updater(),s.splice(c,1))}e=l}}}},439:(t,n,e)=>{"use strict";var i;e.d(n,{Z:()=>p}),function(t){t[t.Top=0]="Top",t[t.Center=1]="Center",t[t.Bottom=2]="Bottom"}(i||(i={}));class r{constructor(t,n){this.x=t,this.y=n}}var s=function(t,n,e,i){return new(e||(e=Promise))((function(r,s){function a(t){try{l(i.next(t))}catch(t){s(t)}}function o(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var n;t.done?r(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,o)}l((i=i.apply(t,n||[])).next())}))};class a{constructor(t,n){this.xmlhttp=new XMLHttpRequest,this.promise=new Promise(((t,n)=>{this.xmlhttp.onreadystatechange=()=>{4==this.xmlhttp.readyState&&200==this.xmlhttp.status?t(this.xmlhttp.response):4==this.xmlhttp.readyState&&n(this.xmlhttp.status)}})),this.xmlhttp.open(n,t,!0),this.sent=!1}Send(){if(this.sent)throw new Error("HTTP request has already been sent!");this.xmlhttp.send(this.body),this.sent=!0}SetBody(t){return this.body=t,this}AsJSON(){return s(this,void 0,void 0,(function*(){return this.xmlhttp.responseType="json",this.Send(),yield this.promise}))}AsArrayBuffer(){return s(this,void 0,void 0,(function*(){return this.xmlhttp.responseType="arraybuffer",this.Send(),yield this.promise}))}}class o{}o.STATES=[{l:"Alabama",s:"AL"},{l:"Alaska",s:"AK"},{l:"American Samoa",s:"AS"},{l:"Arizona",s:"AZ"},{l:"Arkansas",s:"AR"},{l:"California",s:"CA"},{l:"Colorado",s:"CO"},{l:"Connecticut",s:"CT"},{l:"Delaware",s:"DE"},{l:"District Of Columbia",s:"DC"},{l:"Federated States Of Micronesia",s:"FM"},{l:"Florida",s:"FL"},{l:"Georgia",s:"GA"},{l:"Guam",s:"GU"},{l:"Hawaii",s:"HI"},{l:"Idaho",s:"ID"},{l:"Illinois",s:"IL"},{l:"Indiana",s:"IN"},{l:"Iowa",s:"IA"},{l:"Kansas",s:"KS"},{l:"Kentucky",s:"KY"},{l:"Louisiana",s:"LA"},{l:"Maine",s:"ME"},{l:"Marshall Islands",s:"MH"},{l:"Maryland",s:"MD"},{l:"Massachusetts",s:"MA"},{l:"Michigan",s:"MI"},{l:"Minnesota",s:"MN"},{l:"Mississippi",s:"MS"},{l:"Missouri",s:"MO"},{l:"Montana",s:"MT"},{l:"Nebraska",s:"NE"},{l:"Nevada",s:"NV"},{l:"New Hampshire",s:"NH"},{l:"New Jersey",s:"NJ"},{l:"New Mexico",s:"NM"},{l:"New York",s:"NY"},{l:"North Carolina",s:"NC"},{l:"North Dakota",s:"ND"},{l:"Northern Mariana Islands",s:"MP"},{l:"Ohio",s:"OH"},{l:"Oklahoma",s:"OK"},{l:"Oregon",s:"OR"},{l:"Palau",s:"PW"},{l:"Pennsylvania",s:"PA"},{l:"Puerto Rico",s:"PR"},{l:"Rhode Island",s:"RI"},{l:"South Carolina",s:"SC"},{l:"South Dakota",s:"SD"},{l:"Tennessee",s:"TN"},{l:"Texas",s:"TX"},{l:"Utah",s:"UT"},{l:"Vermont",s:"VT"},{l:"Virgin Islands",s:"VI"},{l:"Virginia",s:"VA"},{l:"Washington",s:"WA"},{l:"West Virginia",s:"WV"},{l:"Wisconsin",s:"WI"},{l:"Wyoming",s:"WY"}];class l{constructor(t,n){this.len=t.getUint8(n++),this.pi=t.getUint16(n,!0),n+=2,this.callsign=l.ReadString(t,n),n+=this.callsign.length+1,this.city=l.ReadString(t,n),n+=this.city.length+1,this.stateIndex=t.getUint8(n++),this.facilityId=16777215&t.getUint32(n,!0),n+=3,this.lat=t.getFloat32(n,!0),n+=4,this.lon=t.getFloat32(n,!0),n+=4}GetPiCode(){return this.pi}GetCallsign(){return this.callsign}GetCity(){return this.city}GetStateShort(){return o.STATES[this.stateIndex].s}GetStateLong(){return o.STATES[this.stateIndex].l}GetFacilityId(){return this.facilityId}GetLon(){return this.lon}GetLat(){return this.lat}static ReadString(t,n){for(var e=t.getUint8(n),i="",r=0;r<e;r++)i+=String.fromCharCode(t.getUint8(n+1+r));return i}}var d=function(t,n,e,i){return new(e||(e=Promise))((function(r,s){function a(t){try{l(i.next(t))}catch(t){s(t)}}function o(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var n;t.done?r(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,o)}l((i=i.apply(t,n||[])).next())}))};class c{constructor(){this.toc={},this.init=this.Init()}GetStationInfo(t){return d(this,void 0,void 0,(function*(){return yield this.init,null==this.toc[t]?null:new l(this.view,this.toc[t])}))}Init(){return d(this,void 0,void 0,(function*(){this.data=yield new a("https://assets.romanport.com/static/PICODE_NORTH_AMERICA.bin","GET").AsArrayBuffer(),this.view=new DataView(this.data);for(var t=0;t+2<=this.view.byteLength;){var n=this.view.getUint8(t),e=this.view.getUint16(t+1,!0);this.toc[e]=t,t+=n}window.TOC=this}))}}e(654);class h{constructor(t){this.conn=t.conn,this.info=t.info,this.db=new c}GetWindowName(){return"RDS"}GetIsHeaderless(){return!0}GetMinSize(){return new r(700,40)}GetMaxSize(){return new r(1e5,40)}ResizeWindow(t,n){}CreateWindow(t){this.pTop=document.createElement("div"),this.pTop.classList.add("rplug_rds"),t.appendChild(this.pTop),this.ePs=this.CreateBasicElementDP(this.pTop,this.conn.VFO.RDS.PsBuffer,(t=>t),"rplug_rds_ps"),this.eRt=this.CreateBasicElementDP(this.pTop,this.conn.VFO.RDS.RtBuffer,(t=>t.trimEnd()),"rplug_rds_rt"),this.ePi=this.CreateBasicElement(this.pTop,"rplug_rds_pi"),this.eRds=this.CreateIndicatorElement(this.pTop,this.conn.VFO.RdsDetected,"RDS"),this.eStereo=this.CreateIndicatorElement(this.pTop,this.conn.VFO.StereoDetected,"STEREO"),this.pStation=document.createElement("div"),this.pStation.classList.add("rplug_rds_stationinfo"),this.ePi.parentElement.appendChild(this.pStation),this.pStationContent=document.createElement("div"),this.pStationContent.classList.add("rplug_rds_stationinfo_content"),this.pStation.appendChild(this.pStationContent),this.eState=this.CreateBasicElement(this.pStationContent),this.CreateDividingElement(this.pStationContent),this.eCity=this.CreateBasicElement(this.pStationContent),this.CreateDividingElement(this.pStationContent).classList.add("rplug_rds_stationinfo_gps"),this.eDistance=this.CreateBasicElement(this.pStationContent,"rplug_rds_stationinfo_distance"),this.eDistance.classList.add("rplug_rds_stationinfo_gps"),this.eDirection=document.createElement("div"),this.eDirection.classList.add("rplug_rds_stationinfo_gps"),this.eDirection.classList.add("rplug_rds_stationinfo_direction"),this.pStationContent.appendChild(this.eDirection),this.conn.VFO.RDS.PiCode.OnChanged.Bind((t=>{return n=this,e=void 0,r=function*(){if(this.pTop.classList.remove("rplug_rds_stationinfo_info"),this.entry=yield this.db.GetStationInfo(t),null!=this.entry){var n=this.entry.GetCallsign();n.includes("-")||(n+="-FM"),this.ePi.innerText=n,this.pTop.classList.add("rplug_rds_stationinfo_info"),this.isStationInfoOpen&&this.UpdateStationInfo()}},new((i=void 0)||(i=Promise))((function(t,s){function a(t){try{l(r.next(t))}catch(t){s(t)}}function o(t){try{l(r.throw(t))}catch(t){s(t)}}function l(n){var e;n.done?t(n.value):(e=n.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((r=r.apply(n,e||[])).next())}));var n,e,i,r})),this.ePi.addEventListener("mouseover",(()=>{this.isStationInfoOpen=!0,this.UpdateStationInfo()})),this.ePi.addEventListener("mouseout",(()=>{this.isStationInfoOpen=!1}))}DestoryWindow(){}UpdateStationInfo(){this.pStation.classList.remove("rplug_rds_stationinfo_activegps"),this.eState.innerText=this.entry.GetStateShort(),this.eCity.innerText=this.entry.GetCity(),this.MoveStationInfo(),navigator.geolocation.getCurrentPosition((t=>{var n=h.CalculateDistance(t.coords.latitude,t.coords.longitude,this.entry.GetLat(),this.entry.GetLon()),e=180*Math.atan2(this.entry.GetLat()-t.coords.latitude,this.entry.GetLon()-t.coords.longitude)/Math.PI;this.eDistance.innerText=Math.round(100*n)/100+"mi",this.eDirection.style.transform="rotate("+e+"deg)",this.pStation.classList.add("rplug_rds_stationinfo_activegps"),this.MoveStationInfo()}))}static CalculateDistance(t,n,e,i){var r=h.Deg2rad(e-t),s=h.Deg2rad(i-n),a=Math.sin(r/2)*Math.sin(r/2)+Math.cos(h.Deg2rad(t))*Math.cos(h.Deg2rad(e))*Math.sin(s/2)*Math.sin(s/2);return 2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))*3958.8}static Deg2rad(t){return t*(Math.PI/180)}MoveStationInfo(){var t=this.ePi.parentElement,n=this.pStation,e=this.pStationContent.clientWidth/2,i=t.getBoundingClientRect(),r=i.left+i.width/2,s=r-e,a=r+e;if(a>window.innerWidth){var o=a-window.innerWidth;s-=o,a-=o,console.log(o)}n.style.left=s+"px",n.style.width=a-s+"px"}CreateDividingElement(t){var n=document.createElement("div");return n.classList.add("rplug_rds_stationinfo_div"),n.innerText="-",t.appendChild(n),n}CreateBasicElement(t,n){var e=document.createElement("div");e.classList.add("rplug_rds_element"),t.appendChild(e);var i=document.createElement("div");return i.classList.add("rplug_rds_text"),e.appendChild(i),null!=n&&e.classList.add(n),i}CreateBasicElementDP(t,n,e,i){var r=this.CreateBasicElement(t,i);return n.OnChanged.Bind((t=>{h.UpdateText(r,e(t))})),r}CreateIndicatorElement(t,n,e){var i=document.createElement("div");i.classList.add("rplug_rds_element"),i.classList.add("rplug_rds_indicator"),t.appendChild(i);var r=document.createElement("div");return r.classList.add("rplug_rds_text"),r.innerText=e,i.appendChild(r),n.OnChanged.Bind((t=>{h.UpdateIndicator(i,t)})),h.UpdateIndicator(i,n.GetValue()),i}static UpdateIndicator(t,n){n?t.classList.remove("rplug_rds_indicator_unlit"):t.classList.add("rplug_rds_indicator_unlit")}static UpdateText(t,n){null!=n&&(t.innerText=n.toString().replace("\r","").replace("\n",""))}}class p{constructor(t){this.ctx=t}Init(){this.ctx.RegisterWindowClass({id:"RomanPort.RdsBarPlugin.RdsBar",displayName:"RDS",createInstance:t=>new h(t),hideHeader:!0,sizeDefault:new r(400,40),sizeMax:new r(9999,40),sizeMin:new r(100,40)}).RegisterInstance({displayName:"RDS Info Bar",info:{},id:"rds"}).RequestMount(i.Top,0)}}},138:(t,n,e)=>{const i=e(439).Z;t.exports=i}},n={};function e(i){var r=n[i];if(void 0!==r)return r.exports;var s=n[i]={id:i,exports:{}};return t[i](s,s.exports,e),s.exports}e.n=t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},e.d=(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},e.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),e.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i=e(138);RaptorPlugin=i})();